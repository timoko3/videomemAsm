Turbo Assembler	 Version 4.1	    02/19/26 01:06:09	    Page 1
vidframe.asm



      1	0000			     .model tiny
      2	0000			     .code
      3				     .286
      4				     org 100h
      5
      6	      =000D		     COLOR			     EQU 0dh
      7	      =005E		     TEXT_COLOR			     EQU 5Eh
      8
      9	      =0004		     NO_MODE_SYMB	     EQU 04h
     10	      =0003		     MODE_ONE_SYMB	     EQU 03h
     11	      =0005		     MODE_TWO_SYMB	     EQU 05h
     12
     13	      =0023		     NEW_LINE_SYMB	     EQU '#'
     14	      =0024		     END_STR_INPUT_SYMB	     EQU '$'
     15
     16	0100  B8 B800		     Start:  mov ax, 0B800h  ; initializing video memory segment register
     17	0103  8E C0			     mov es, ax
     18
     19	0105  33 DB			     xor bx, bx
     20	0107  BB 0370			     mov bx, 160d * 5d + 80d; init video segment shift
     21
     22	010A  B6 24			     mov dh, 24h ; $ ASCII endStrSym
     23
     24					     ; read mode from cmd and put in dl	symbol for frame
     25
     26	010C  E8 0005			     call chooseMode
     27
     28					     ; end programm interrupt
     29	010F				     endProgram:
     30	010F  B8 4C00			     mov ax, 4C00h
     31	0112  CD 21			     int 21h
     32
     33				     ;-----------------------------------------------------------------------
     34				     ; Analyzes	cmd line and calls mode	chosen in cmd
     35				     ; Entry: nop
     36				     ; Exit:  dl = symbol if basicMode chosen
     37				     ; Exp:   nop
     38				     ; Destr: si, dl
     39				     ;-----------------------------------------------------------------------
     40
     41	0114			     chooseMode	     PROC
     42	0114  BE 0080			     mov si, 80h   ; write in si cmd len addr
     43
     44	0117  8A 14			     mov dl, [si]  ; write in dl temporary cmd length
     45
     46	0119  80 FA 00			     cmp dl, 0
     47	011C  75 03			     jne skipNoMode   ;	handle the no mode case
     48	011E					     wrongMode:	  ; jump here if number	don't match appropriate
     49	011E  B2 04				     mov dl, NO_MODE_SYMB
     50	0120  C3				     ret
     51	0121				     skipNoMode:
     52
     53					     ; get mode	number
     54
     55	0121  BE 0082			     mov si, 82h
     56	0124  8A 14			     mov dl, [si]
     57
Turbo Assembler	 Version 4.1	    02/19/26 01:06:09	    Page 2
vidframe.asm



     58					     ; handle mode number
     59
     60	0126  80 FA 30			     cmp dl, 0 + '0'
     61	0129  75 04			     jne notZeroMode
     62	012B  E8 0064				     call complicatedMode
     63	012E  C3				     ret
     64	012F				     notZeroMode:
     65
     66	012F  80 FA 31			     cmp dl, 1 + '0'
     67	0132  75 06			     jne notFirstMode
     68	0134  B2 03				     mov dl, MODE_ONE_SYMB
     69	0136  E8 0015				     call basicMode
     70	0139  C3				     ret
     71	013A				     notFirstMode:
     72
     73	013A  80 FA 32			     cmp dl, 2 + '0'
     74	013D  75 06			     jne notSecondMode
     75	013F  B2 05				     mov dl, MODE_TWO_SYMB
     76	0141  E8 000A				     call basicMode
     77	0144  C3				     ret
     78	0145				     notSecondMode:
     79
     80	0145  80 FA 33			     cmp dl, 3 + '0'
     81	0148  75 D4			     jne wrongMode
     82	014A  E8 0091				     call animationMode
     83	014D  C3				     ret
     84
     85	014E			     chooseMode	ENDP
     86
     87				     ;-----------------------------------------------------------------------
     88				     ; Drawing basic version of	frame just around string with the symbol with code in dl
     89				     ; Entry: dl = symbol of frame
     90				     ; Exit:  nop
     91				     ; Exp:   nop
     92				     ; Destr: ax, bx, cx, si, di
     93				     ;-----------------------------------------------------------------------
     94
     95	014E			     basicMode PROC
     96	014E  BE 0084			     mov si, 84h     ; string to print addr -> si
     97
     98	0151  E8 01C6			     call strlen   ; count string length procedure
     99
    100	0154  8B C1			     mov ax, cx
    101	0156  05 0002			     add ax, 2
    102	0159  03 C0			     add ax, ax
    103	015B  E8 01E5			     call alignFrame
    104
    105	015E  8B C1			     mov ax, cx
    106	0160  05 0002			     add ax, 2
    107	0163  E8 0165			     call printFrame
    108
    109	0166  BF 0002			     mov di, 2
    110	0169  E8 01CE			     call videoMemPointerMoveBack
    111
    112	016C  81 C3 00A0		     add bx, 160     ; move to next line
    113
    114	0170  E8 01BB			     call outSymbol	     ; part of frame
Turbo Assembler	 Version 4.1	    02/19/26 01:06:09	    Page 3
vidframe.asm



    115	0173  E8 016B			     call printText
    116	0176  E8 01B5			     call outSymbol	     ; part of frame
    117
    118	0179  BF 0002			     mov di, 2
    119	017C  E8 01BB			     call videoMemPointerMoveBack
    120
    121	017F  81 C3 00A0		     add bx, 160     ; move to next line
    122
    123	0183  8B C1			     mov ax, cx
    124	0185  05 0002			     add ax, 2
    125	0188  E8 0140			     call printFrame
    126
    127	018B  BF 0002			     mov di, 2
    128	018E  E8 01A9			     call videoMemPointerMoveBack
    129
    130	0191  C3			     ret
    131	0192			     basicMode ENDP
    132
    133				     ;-----------------------------------------------------------------------
    134				     ; Drawing complicated version of frame with additional parameter in cmd line
    135				     ; Entry: si = pointer to next symbol to print
    136				     ; Exit:  nop
    137				     ; Exp:   nop
    138				     ; Destr: si, ax, cx, dl, bx
    139				     ;-----------------------------------------------------------------------
    140
    141	      =008E		     TEXT_START_ADDR EQU      84h + 10
    142	      =0084		     FRAME_SYM_START_ADDR EQU 84h
    143
    144	0192			     complicatedMode PROC
    145	0192  BE 008E			     mov si, TEXT_START_ADDR ; get strlen
    146	0195  E8 0182			     call strlen
    147
    148	0198  BE 0084			     mov si, FRAME_SYM_START_ADDR
    149
    150					     ; put align num in	ax
    151	019B  8B C1			     mov ax, cx
    152	019D  05 0006			     add ax, 6
    153	01A0  03 C0			     add ax, ax
    154	01A2  E8 019E			     call alignFrame
    155
    156					     ; init cycle
    157	01A5  B0 06			     mov al, 6
    158	01A7  B4 01			     mov ah, 1
    159
    160	01A9				     startComplicatedFrameCycle:
    161	01A9  3A E0			     cmp ah, al
    162	01AB  7D 30			     jge endComplicatedFrameCycle
    163	01AD  50				     push ax
    164	01AE  E8 00FF				     call findSymForStr
    165
    166	01B1  8A 14				     mov dl, [si]
    167
    168	01B3  E8 00E0				     call printCompModeStrPreamble
    169
    170	01B6  80 FC 03				     cmp ah, 3
    171	01B9  75 0B				     jne notTextStr
Turbo Assembler	 Version 4.1	    02/19/26 01:06:09	    Page 4
vidframe.asm



    172	01BB  56					     push si
    173	01BC  BE 008E					     mov si, TEXT_START_ADDR
    174
    175	01BF  E8 011F					     call printText
    176
    177	01C2  5E					     pop si
    178	01C3  EB 06 90					     jmp printedStr
    179	01C6					     notTextStr:
    180
    181	01C6  8B C1				     mov ax, cx
    182	01C8  E8 0100				     call printFrame
    183
    184	01CB					     printedStr:
    185
    186	01CB  E8 00D5				     call printCompModeStrPostamble
    187
    188	01CE  BF 0006				     mov di, 6
    189	01D1  E8 0166				     call videoMemPointerMoveBack
    190	01D4  81 C3 00A0			     add bx, 160     ; move to next line
    191
    192	01D8  58				     pop ax
    193	01D9  FE C4				     inc ah
    194	01DB  EB CC			     jmp startComplicatedFrameCycle
    195	01DD				     endComplicatedFrameCycle:
    196
    197	01DD  C3			     ret
    198	01DE			     complicatedMode ENDP
    199
    200				     ;-----------------------------------------------------------------------
    201				     ; Drawing complicated version of frame with additional parameter in cmd line
    202				     ; Entry: dh = ensStr symbol
    203				     ; Exit:  nop
    204				     ; Exp:   nop
    205				     ; Destr: ax, bx, cx, dx, di, si
    206				     ;-----------------------------------------------------------------------
    207
    208	01DE			     animationMode PROC
    209	01DE  BE 008E			     mov si, TEXT_START_ADDR ; get strlen
    210	01E1  E8 0112			     call countLineMaxLen
    211
    212	01E4  32 E4			     xor ah, ah
    213	01E6  8B F8			     mov di, ax
    214	01E8  E8 00A4			     call getAnimationIterationsCount
    215
    216	01EB  8A D0			     mov dl, al	  ; al contains	AMOUNT_ANIMATION_ITERATIONS
    217	01ED  32 F6			     xor dh, dh
    218
    219	01EF  F7 C1 0001		     test cx, 1
    220	01F3  74 06			     jz	??not_odd
    221	01F5  80 C6 03				     add dh, 3d
    222	01F8  EB 04 90				     jmp ??is_odd
    223	01FB				     ??not_odd:
    224	01FB  80 C6 02			     add dh, 2d
    225	01FE				     ??is_odd:
    226
    227	01FE  8B CF			     mov cx, di
    228	0200				     StartAnimationCycle:
Turbo Assembler	 Version 4.1	    02/19/26 01:06:09	    Page 5
vidframe.asm



    229	0200  3A F0			     cmp dh, al
    230	0202  7F 6E			     jg	endAnimationCycle
    231	0204  50				     push ax
    232
    233	0205  BE 0084				     mov si, FRAME_SYM_START_ADDR
    234
    235	0208  33 DB				     xor bx, bx
    236	020A  BB 0370				 mov bx, 160 * 5 + 80; init video segment shift
    237
    238						     ; put align num in	ax
    239
    240	020D  33 C0				     xor ax, ax
    241	020F  8A C6				     mov al, dh
    242	0211  02 C0				     add al, al
    243	0213  E8 012D				     call alignFrame
    244
    245						     ; init cycle
    246	0216  B8 0005				     mov ax, 5d
    247	0219  03 C1				     add ax, cx
    248
    249	021B  B4 01				     mov ah, 1d
    250
    251	021D					     startComplicatedFrameCycle2:
    252	021D  3A E0				     cmp ah, al
    253	021F  7D 43				     jge endComplicatedFrameCycle2
    254	0221  50					     push ax
    255	0222  52					     push dx
    256
    257	0223  E8 008A					     call findSymForStr
    258
    259	0226  8A 14					     mov dl, [si]
    260	0228  83 C6 01					     add si, 1d
    261	022B  E8 0100					     call outSymbol
    262
    263	022E  80 FC 03					     cmp ah, 3d
    264	0231  75 0C					     jne notTextStr2
    265	0233  5A						     pop dx
    266	0234  3A F2						     cmp dh, dl
    267	0236  52						     push dx
    268	0237  7C 06						     jl	notTextStr2
    269
    270
    271	0239  E8 0037						     call animationTextStrCase
    272
    273	023C  EB 0F 90						     jmp printedStr2
    274	023F						     notTextStr2:
    275
    276	023F  8A 14					     mov dl, [si]
    277	0241  83 C6 01					     add si, 1d
    278
    279	0244  33 C0					     xor ax, ax
    280	0246  8A C6					     mov al, dh
    281	0248  2C 02					     sub al, 2d
    282
    283	024A  E8 007E					     call printFrame
    284
    285	024D						     printedStr2:
Turbo Assembler	 Version 4.1	    02/19/26 01:06:09	    Page 6
vidframe.asm



    286
    287	024D  8A 14					     mov dl, [si]
    288
    289	024F  E8 00DC					     call outSymbol
    290
    291	0252  5A					     pop dx
    292
    293	0253  33 C0					     xor ax, ax
    294	0255  8A C6					     mov al, dh
    295	0257  D1 E0					     shl ax, 1	      ;	ax = dh	* 2
    296	0259  2B D8					     sub bx, ax
    297
    298	025B  81 C3 00A0				     add bx, 160     ; move to next line
    299
    300	025F  58					     pop ax
    301	0260  FE C4					     inc ah
    302	0262  EB B9				     jmp startComplicatedFrameCycle2
    303	0264					     endComplicatedFrameCycle2:
    304
    305	0264  51				     push cx
    306	0265  B9 FDE8				     mov cx, 65000d
    307	0268  E8 00E8				     call delayForAnimation
    308	026B  59				     pop cx
    309
    310	026C  80 C6 02				     add dh, 2
    311
    312	026F  58				     pop ax
    313	0270  EB 8E			     jmp StartAnimationCycle
    314	0272				     endAnimationCycle:
    315
    316	0272  C3			     ret
    317	0273			     animationMode ENDP
    318
    319				     ;-----------------------------------------------------------------------
    320				     ; Animation string	with text handle
    321				     ; Entry: si = symbol to print addr
    322				     ;		      cx = len line
    323				     ; Exit:  nop
    324				     ; Exp:   zf = 0 means length str is even
    325				     ;		      zf = 1 means length str is odd
    326				     ; Destr: dl, si, bx, ah
    327				     ;-----------------------------------------------------------------------
    328
    329	0273			     animationTextStrCase PROC
    330	0273  8A 14			     mov dl, [si]
    331	0275  E8 00B6			     call outSymbol
    332	0278  E8 00B3			     call outSymbol
    333	027B  83 C6 01			     add si, 1d
    334
    335	027E  B6 24			     mov dh, '$'
    336
    337	0280  56			     push si
    338	0281  BE 008E			     mov  si, TEXT_START_ADDR
    339
    340	0284  E8 005A			     call printText
    341
    342	0287  5E			     pop si
Turbo Assembler	 Version 4.1	    02/19/26 01:06:09	    Page 7
vidframe.asm



    343
    344	0288  E8 00A3			     call outSymbol
    345	028B  E8 00A0			     call outSymbol
    346
    347	028E  C3			     ret
    348	028F			     animationTextStrCase ENDP
    349
    350				     ;-----------------------------------------------------------------------
    351				     ; finds amount of animation iterations
    352				     ; Entry: cx = final frame size
    353				     ; Exit:  al = amount of animation iterations
    354				     ; Exp:   nop
    355				     ; Destr: al
    356				     ;-----------------------------------------------------------------------
    357
    358	028F			     getAnimationIterationsCount PROC
    359	028F  33 C0			     xor ax, ax
    360	0291  8A C1			     mov al, cl
    361
    362	0293  04 06			     add al, 6d
    363
    364	0295  C3			     ret
    365	0296			     getAnimationIterationsCount ENDP
    366
    367				     ;-----------------------------------------------------------------------
    368				     ; makes preamble for string with text in complicatedMode
    369				     ; Entry: si = pointer to next symbol to print
    370				     ; Exit:  nop
    371				     ; Exp:   nop
    372				     ; Destr: dl, bx
    373				     ;-----------------------------------------------------------------------
    374
    375	0296			     printCompModeStrPreamble PROC
    376	0296  E8 0095			     call outSymbol
    377
    378	0299  46			     inc si
    379	029A  8A 14			     mov dl, [si]
    380	029C  E8 008F			     call outSymbol
    381	029F  E8 008C			     call outSymbol
    382
    383	02A2  C3			     ret
    384	02A3			     printCompModeStrPreamble ENDP
    385
    386				     ;-----------------------------------------------------------------------
    387				     ; makes postamble for string with text in complicatedMode
    388				     ; Entry: si = pointer to next symbol to print
    389				     ; Exit:  nop
    390				     ; Exp:   nop
    391				     ; Destr: dl, bx
    392				     ;-----------------------------------------------------------------------
    393
    394	02A3			     printCompModeStrPostamble PROC
    395	02A3  E8 0088			     call outSymbol
    396	02A6  E8 0085			     call outSymbol
    397
    398	02A9  46			     inc si
    399	02AA  8A 14			     mov dl, [si]
Turbo Assembler	 Version 4.1	    02/19/26 01:06:09	    Page 8
vidframe.asm



    400	02AC  E8 007F			     call outSymbol
    401
    402	02AF  C3			     ret
    403	02B0			     printCompModeStrPostamble ENDP
    404
    405				     ;-----------------------------------------------------------------------
    406				     ; pareses current needed symbols of frame from cmd	line
    407				     ; Entry: ah = current str to print
    408				     ;		      al = last	str
    409				     ; Exit:  si = pointer to the needed symbol	in cmd line
    410				     ; Exp:   nop
    411				     ; Destr: si
    412				     ;-----------------------------------------------------------------------
    413
    414	02B0			     findSymForStr PROC
    415	02B0  80 FC 01			     cmp ah, 1
    416	02B3  75 04			     jne notFirst
    417	02B5  BE 0084				     mov si, 84h
    418	02B8  C3				     ret
    419
    420	02B9				     notFirst:
    421	02B9  2C 01			     sub al, 1
    422	02BB  3A E0			     cmp ah, al
    423
    424	02BD  75 06			     jne notLast
    425	02BF  BE 008A				     mov si, 84h + 6
    426	02C2  EB 04 90				     jmp ??end
    427	02C5				     notLast:
    428
    429	02C5  BE 0087			     mov si, 84h + 3
    430
    431	02C8				     ??end:
    432	02C8  04 01			     add al, 1
    433	02CA  C3			     ret
    434	02CB			     findSymForStr ENDP
    435
    436				     ;-----------------------------------------------------------------------
    437				     ; puts string of symbol to	videoMem
    438				     ; Entry: dl = symbol to print with
    439				     ;		      dh = color code
    440				     ;		      ax = amount symbols to print
    441				     ; Exit:  nop
    442				     ; Exp:   nop
    443				     ; Destr: di, bx
    444				     ;-----------------------------------------------------------------------
    445
    446	02CB			     printFrame	PROC
    447
    448	02CB  BF 0000			     mov di, 0
    449	02CE				     frameCycleStart:
    450	02CE  3B F8			     cmp di, ax
    451	02D0  7D 0E			     jge endFrameCycle
    452
    453	02D2  26: 88 17			     mov byte ptr es:[bx], dl
    454	02D5  26: C6 47	01 0D		     mov byte ptr es:[bx + 1], COLOR
    455
    456	02DA  47			     inc di
Turbo Assembler	 Version 4.1	    02/19/26 01:06:09	    Page 9
vidframe.asm



    457	02DB  83 C3 02			     add bx, 2
    458
    459	02DE  EB EE			     jmp frameCycleStart
    460
    461	02E0				     endFrameCycle:
    462
    463	02E0  C3			     ret
    464	02E1			     printFrame	ENDP
    465
    466				     ;-----------------------------------------------------------------------
    467				     ; puts string to videoMem
    468				     ; Entry: Entry: si	= pointer to the begin of str
    469				     ; Exit:  nop
    470				     ; Exp:   dh = ensStr symbol ASCII code
    471				     ;
    472				     ; Destr: ah, si, bx
    473				     ;-----------------------------------------------------------------------
    474
    475	02E1			     printText PROC
    476
    477					     ; text to videomem
    478	02E1				     cycleStart:
    479	02E1  8A 24			     mov ah, [si]
    480
    481	02E3  3A E6			     cmp ah, dh
    482	02E5  74 0E			     je	endStr
    483	02E7  26: 88 27			     mov byte ptr es:[bx], ah
    484	02EA  26: C6 47	01 5E		     mov byte ptr es:[bx+1], TEXT_COLOR
    485
    486	02EF  46			     inc si
    487	02F0  83 C3 02			     add bx, 2
    488
    489	02F3  EB EC			     jmp cycleStart
    490
    491	02F5				     endStr:
    492
    493	02F5  C3			     ret
    494	02F6			     printText ENDP
    495
    496				     ;-----------------------------------------------------------------------
    497				     ; counts max line len
    498				     ; Entry: si = pointer to the begin	of str
    499				     ; Exit:  cx = max length line
    500				     ;		      al = amount lines
    501				     ; Exp:   dh = ensStr symbol ASCII code
    502				     ; Destr: ax, cx, di, si
    503				     ;-----------------------------------------------------------------------
    504
    505	02F6			     countLineMaxLen PROC
    506	02F6  53			     push bx
    507	02F7  52			     push dx
    508	02F8  33 DB			     xor bx, bx
    509
    510	02FA  B6 23			     mov dh, NEW_LINE_SYMB
    511	02FC				     ??cycleStart:
    512
    513	02FC  E8 001B			     call strlen
Turbo Assembler	 Version 4.1	    02/19/26 01:06:09	    Page 10
vidframe.asm



    514	02FF  8B F7			     mov si, di
    515
    516	0301  3B D9			     cmp bx, cx
    517	0303  7F 02			     jg	??notGreaterLine
    518	0305  8B D9				     mov bx, cx
    519	0307				     ??notGreaterLine:
    520
    521	0307  FE C0			     inc al
    522
    523	0309  8A 14			     mov dl, [si]
    524	030B  80 FA 24			     cmp dl, END_STR_INPUT_SYMB
    525	030E  74 03			     je	??cycleEnd
    526
    527	0310  46			     inc si
    528	0311  EB E9			     jmp ??cycleStart
    529
    530	0313				     ??cycleEnd:
    531
    532	0313  32 E4			     xor ah, ah
    533	0315  8B CB			     mov cx, bx
    534
    535	0317  5A			     pop dx
    536	0318  5B			     pop bx
    537	0319  C3			     ret
    538	031A			     countLineMaxLen ENDP
    539
    540				     ;-----------------------------------------------------------------------
    541				     ; counts amount of	symbols	in str with endStr symbol '$'
    542				     ; Entry: si = pointer to the begin	of str
    543				     ; Exit:  cx = length str
    544				     ; Exp:   dh = ensStr symbol ASCII code
    545				     ; Destr: ah, cx, di
    546				     ;-----------------------------------------------------------------------
    547
    548	031A			     strlen PROC
    549	031A  8B FE			     mov di, si
    550	031C  33 C9			     xor cx, cx
    551
    552	031E				     strlenCycle:
    553	031E  8A 25			     mov ah, [di]
    554
    555	0320  3A E6			     cmp ah, dh
    556	0322  74 09			     je	strlenEnd
    557	0324  80 FC 24			     cmp ah, END_STR_INPUT_SYMB
    558	0327  74 04			     je	strlenEnd
    559	0329  47			     inc di
    560
    561	032A  41			     inc cx    ; increment symbols counter
    562	032B  EB F1			     jmp strlenCycle
    563	032D				     strlenEnd:
    564	032D  C3			     ret
    565	032E			     strlen ENDP
    566
    567				     ;-----------------------------------------------------------------------
    568				     ; puts symbol in video memory and moves to	next cell for symbol
    569				     ; Entry: dl      =	symbol of frame
    570				     ;		      es:[bx] =	addr where to put symbol
Turbo Assembler	 Version 4.1	    02/19/26 01:06:09	    Page 11
vidframe.asm



    571				     ; Exit:  nop
    572				     ; Exp:   es:[bx] =	point to appropriate memCell
    573				     ; Destr: bx
    574				     ;-----------------------------------------------------------------------
    575
    576	032E			     outSymbol PROC
    577	032E  26: 88 17			     mov byte ptr es:[bx], dl
    578	0331  26: C6 47	01 0D		     mov byte ptr es:[bx + 1], COLOR
    579	0336  83 C3 02			     add bx, 2
    580
    581	0339  C3			     ret
    582	033A			     outSymbol ENDP
    583
    584				     ;-----------------------------------------------------------------------
    585				     ; returns bx to the start position
    586				     ; Entry: di = amount of extra symbols except from text symbols
    587				     ; Exit:  nop
    588				     ; Exp:   nop
    589				     ; Destr: ax, bx
    590				     ;-----------------------------------------------------------------------
    591
    592	033A			     videoMemPointerMoveBack PROC
    593	033A  8B C1			     mov ax, cx
    594	033C  03 C7			     add ax, di
    595	033E  03 C0			     add ax, ax
    596
    597	0340  2B D8			     sub bx, ax
    598
    599	0342  C3			     ret
    600	0343			     videoMemPointerMoveBack ENDP
    601
    602				     ;-----------------------------------------------------------------------
    603				     ; Alining frame for it to be in the center	of screen
    604				     ; Entry: ax = width of frame in symbols
    605				     ; Exit:  bx = points at the left side of frame
    606				     ; Exp:   bx = points in the center	of some	string
    607				     ; Destr: ax, bx
    608				     ;-----------------------------------------------------------------------
    609
    610	0343			     alignFrame	PROC
    611	0343  3D 0002			     cmp ax, 2d
    612	0346  75 03			     jne notTwoCase
    613	0348  2B D8				     sub bx, ax
    614	034A  C3				     ret
    615	034B				     notTwoCase:
    616	034B  C1 E8 02			     shr ax, 2
    617	034E  D1 E0			     shl ax, 1
    618	0350  2B D8			     sub bx, ax
    619	0352  C3			     ret
    620	0353			     alignFrame	ENDP
    621
    622				     ;-----------------------------------------------------------------------
    623				     ; Making delay for	correct	displaying of the animation
    624				     ; Entry: cx = amount of tacts to skip
    625				     ; Exit:  nop
    626				     ; Exp:   nop
    627				     ; Destr: cx
Turbo Assembler	 Version 4.1	    02/19/26 01:06:09	    Page 12
vidframe.asm



    628				     ;-----------------------------------------------------------------------
    629
    630	0353			     delayForAnimation PROC
    631	0353				     delay:
    632	0353  90				     nop
    633	0354  E2 FD				     loop delay
    634	0356  C3			     ret
    635	0357			     delayForAnimation ENDP
    636
    637				     end Start
Turbo Assembler	 Version 4.1	    02/19/26 01:06:09	    Page 13
Symbol Table




Symbol Name			  Type	 Value

??CYCLEEND			  Near	 DGROUP:0313
??CYCLESTART			  Near	 DGROUP:02FC
??DATE				  Text	 "02/19/26"
??END				  Near	 DGROUP:02C8
??FILENAME			  Text	 "vidframe"
??IS_ODD			  Near	 DGROUP:01FE
??NOTGREATERLINE		  Near	 DGROUP:0307
??NOT_ODD			  Near	 DGROUP:01FB
??TIME				  Text	 "01:06:08"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0707H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 VIDFRAME
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
ALIGNFRAME			  Near	 DGROUP:0343
ANIMATIONMODE			  Near	 DGROUP:01DE
ANIMATIONTEXTSTRCASE		  Near	 DGROUP:0273
BASICMODE			  Near	 DGROUP:014E
CHOOSEMODE			  Near	 DGROUP:0114
COLOR				  Number 000D
COMPLICATEDMODE			  Near	 DGROUP:0192
COUNTLINEMAXLEN			  Near	 DGROUP:02F6
CYCLESTART			  Near	 DGROUP:02E1
DELAY				  Near	 DGROUP:0353
DELAYFORANIMATION		  Near	 DGROUP:0353
ENDANIMATIONCYCLE		  Near	 DGROUP:0272
ENDCOMPLICATEDFRAMECYCLE	  Near	 DGROUP:01DD
ENDCOMPLICATEDFRAMECYCLE2	  Near	 DGROUP:0264
ENDFRAMECYCLE			  Near	 DGROUP:02E0
ENDPROGRAM			  Near	 DGROUP:010F
ENDSTR				  Near	 DGROUP:02F5
END_STR_INPUT_SYMB		  Number 0024
FINDSYMFORSTR			  Near	 DGROUP:02B0
FRAMECYCLESTART			  Near	 DGROUP:02CE
FRAME_SYM_START_ADDR		  Number 0084
GETANIMATIONITERATIONSCOUNT	  Near	 DGROUP:028F
MODE_ONE_SYMB			  Number 0003
MODE_TWO_SYMB			  Number 0005
NEW_LINE_SYMB			  Number 0023
NOTFIRST			  Near	 DGROUP:02B9
NOTFIRSTMODE			  Near	 DGROUP:013A
NOTLAST				  Near	 DGROUP:02C5
NOTSECONDMODE			  Near	 DGROUP:0145
NOTTEXTSTR			  Near	 DGROUP:01C6
NOTTEXTSTR2			  Near	 DGROUP:023F
NOTTWOCASE			  Near	 DGROUP:034B
Turbo Assembler	 Version 4.1	    02/19/26 01:06:09	    Page 14
Symbol Table



NOTZEROMODE			  Near	 DGROUP:012F
NO_MODE_SYMB			  Number 0004
OUTSYMBOL			  Near	 DGROUP:032E
PRINTCOMPMODESTRPOSTAMBLE	  Near	 DGROUP:02A3
PRINTCOMPMODESTRPREAMBLE	  Near	 DGROUP:0296
PRINTEDSTR			  Near	 DGROUP:01CB
PRINTEDSTR2			  Near	 DGROUP:024D
PRINTFRAME			  Near	 DGROUP:02CB
PRINTTEXT			  Near	 DGROUP:02E1
SKIPNOMODE			  Near	 DGROUP:0121
START				  Near	 DGROUP:0100
STARTANIMATIONCYCLE		  Near	 DGROUP:0200
STARTCOMPLICATEDFRAMECYCLE	  Near	 DGROUP:01A9
STARTCOMPLICATEDFRAMECYCLE2	  Near	 DGROUP:021D
STRLEN				  Near	 DGROUP:031A
STRLENCYCLE			  Near	 DGROUP:031E
STRLENEND			  Near	 DGROUP:032D
TEXT_COLOR			  Number 005E
TEXT_START_ADDR			  Number 008E
VIDEOMEMPOINTERMOVEBACK		  Near	 DGROUP:033A
WRONGMODE			  Near	 DGROUP:011E

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  0357 Word	  Public  CODE
